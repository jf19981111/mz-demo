var old = [ 
    { id: 100, name: '北京', pinyin: 'beijing' },
    { id: 101, name: '保定', pinyin: 'Baoding'},
    { id: 100, name: '安阳', pinyin: 'Anyang'} 
]

var newVal = [
    { py: 'A', list: [ 
        { name: '安阳' },
        { name: '安庆' } 
    ]},
    { py: 'B', list: [ 
        { name: '北京' },
        { name: '保定' } 
    ]},
]

var index = 0; // 做一个标记，用来找到某个拼音集合的下标的
var flag = {}; // 是用来判断某个拼音集合是否已存在，并且能拿到它的下标 { 'B': 1, 'A': 2 }
var result = []; // 最终的一个结果集合
old.forEach(item => {
    // 1. 得到当前 城市的 拼音首字母
   let py = item.pinyin.substr(0,1).toUpperCase()
    // 2. 构建一个 obj 来存放我们想要的数据结构
    // 判断 当前的这个拼音首字母 是否已有对象
    if (flag[py]) {
        // 存在
        result[flag[py] - 1].list.push(item);
        // [ { py: 'B', list: [{ name: '北京' }, { name: '保定' }] } ]
    } else {
        // 不存在
        let obj = {
            py: py,
            list: [ item ]
        }
        // { py: 'B', list: [{ name: '北京' }] }
        result.push(obj)
        // [ { py: 'B', list: [{ name: '北京' }] } ]
        flag[py] = ++index;
        // { 'B': 1 }
    }
})

console.log(result)